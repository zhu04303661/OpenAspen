# DWSIM æµ‹è¯•ç³»ç»Ÿé‡æ–°æ•´ç†æ€»ç»“

## ğŸ¯ æ•´ç†ç›®æ ‡

å°†åŸæœ¬åˆ†æ•£ã€å¤æ‚çš„æµ‹è¯•æ–‡ä»¶å¤¹é‡æ–°ç»„ç»‡ä¸ºæ¸…æ™°ã€é«˜æ•ˆçš„ç»“æ„ï¼Œåˆ é™¤ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œæä¾›ç»Ÿä¸€çš„æµ‹è¯•ä½“éªŒã€‚

## ğŸ“ æ–°ç›®å½•ç»“æ„

```
tests/                             [æ•´ç†åçš„ç»“æ„]
â”œâ”€â”€ pytest.ini                    # âœ¨ pytestå…¨å±€é…ç½®
â”œâ”€â”€ conftest.py                   # âœ¨ å…¨å±€fixtureså’Œé…ç½®
â”œâ”€â”€ run_unified_pytest.py         # ğŸš€ ç»Ÿä¸€æµ‹è¯•è¿è¡Œå™¨
â”œâ”€â”€ README.md                     # ğŸ“š ä¸»è¦æ–‡æ¡£
â”œâ”€â”€ 
â”œâ”€â”€ unified/                      # ğŸ¯ ç»Ÿä¸€æµ‹è¯•ï¼ˆä¸»è¦ä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ test_dwsim_unified.py     # ğŸ“ 36ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œ887è¡Œä»£ç 
â”‚   â””â”€â”€ conftest_dwsim.py        # ğŸ”§ DWSIMä¸“ç”¨fixtures
â”‚
â”œâ”€â”€ legacy/                       # ğŸ“¦ å†å²ç‰ˆæœ¬ä¿ç•™
â”‚   â”œâ”€â”€ unittest/                # åŸunittestæ ¼å¼æµ‹è¯•
â”‚   â”‚   â””â”€â”€ unit/                # (å®Œæ•´ä¿å­˜)
â”‚   â”œâ”€â”€ pytest_old/             # æ—§pytestæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ integration/         # (å®Œæ•´ä¿å­˜)
â”‚   â”‚   â””â”€â”€ performance/         # (å®Œæ•´ä¿å­˜)
â”‚   â””â”€â”€ runners/                 # å†å²è¿è¡Œå™¨
â”‚       â”œâ”€â”€ run_all_dwsim_tests.py
â”‚       â”œâ”€â”€ run_pytest_dwsim.py
â”‚       â””â”€â”€ run_tests.py
â”‚
â”œâ”€â”€ data/                         # ğŸ“Š æµ‹è¯•æ•°æ®å’Œèµ„æº
â”‚   â”œâ”€â”€ fixtures/                # æµ‹è¯•æ•°æ®æ–‡ä»¶
â”‚   â””â”€â”€ samples/                 # ç¤ºä¾‹æ•°æ®
â”‚       â””â”€â”€ test_data_example.json
â”‚
â”œâ”€â”€ reports/                      # ğŸ“‹ æµ‹è¯•æŠ¥å‘Šè¾“å‡º
â”‚   â”œâ”€â”€ coverage/                # è¦†ç›–ç‡æŠ¥å‘Š
â”‚   â”œâ”€â”€ html/                    # HTMLæµ‹è¯•æŠ¥å‘Š
â”‚   â””â”€â”€ logs/                    # æµ‹è¯•æ—¥å¿—
â”‚
â””â”€â”€ docs/                         # ğŸ“š è¯¦ç»†æ–‡æ¡£
    â”œâ”€â”€ USAGE.md                 # ä½¿ç”¨æŒ‡å—
    â””â”€â”€ DEVELOPMENT.md           # å¼€å‘æŒ‡å—
```

## ğŸ—‚ï¸ æ–‡ä»¶å˜æ›´æ˜ç»†

### âœ… æ–°å¢æ–‡ä»¶

| æ–‡ä»¶ | æè¿° | å¤§å° |
|------|------|------|
| `unified/test_dwsim_unified.py` | ç»Ÿä¸€æµ‹è¯•æ–‡ä»¶ | 887è¡Œ |
| `run_unified_pytest.py` | åŠŸèƒ½ä¸°å¯Œçš„ç»Ÿä¸€è¿è¡Œå™¨ | 533è¡Œ |
| `README.md` | ä¸»è¦ä½¿ç”¨æ–‡æ¡£ | å®Œæ•´ |
| `docs/USAGE.md` | è¯¦ç»†ä½¿ç”¨æŒ‡å— | å®Œæ•´ |
| `docs/DEVELOPMENT.md` | å¼€å‘è€…æŒ‡å— | å®Œæ•´ |
| `legacy/README.md` | å†å²ç‰ˆæœ¬è¯´æ˜ | å®Œæ•´ |
| `data/samples/test_data_example.json` | ç¤ºä¾‹æµ‹è¯•æ•°æ® | å®Œæ•´ |

### ğŸ”„ ç§»åŠ¨æ–‡ä»¶

| åŸä½ç½® | æ–°ä½ç½® | è¯´æ˜ |
|--------|--------|------|
| `test_dwsim_unified.py` | `unified/test_dwsim_unified.py` | ä¸»æµ‹è¯•æ–‡ä»¶ |
| `conftest_dwsim.py` | `unified/conftest_dwsim.py` | DWSIM fixtures |
| `run_pytest_dwsim.py` | `legacy/runners/` | æ—§pytestè¿è¡Œå™¨ |
| `run_all_dwsim_tests.py` | `legacy/runners/` | unittestè¿è¡Œå™¨ |
| `run_tests.py` | `legacy/runners/` | é€šç”¨æµ‹è¯•è¿è¡Œå™¨ |
| `unit/` | `legacy/unittest/` | åŸunittestæµ‹è¯• |
| `integration/` | `legacy/pytest_old/` | æ—§é›†æˆæµ‹è¯• |
| `performance/` | `legacy/pytest_old/` | æ—§æ€§èƒ½æµ‹è¯• |
| `logs/` | `reports/logs/` | æµ‹è¯•æ—¥å¿— |
| `fixtures/` | `data/fixtures/` | æµ‹è¯•æ•°æ® |

### âŒ åˆ é™¤æ–‡ä»¶

| æ–‡ä»¶ | åŸå›  |
|------|------|
| `README_UNIFIED.md` | æ›¿æ¢ä¸ºæ–°çš„README.md |
| `PYTEST_GUIDE.md` | å†…å®¹ç©ºç™½ï¼Œæ›¿æ¢ä¸ºdocs/ |
| `test_dwsim_operations_pytest.py` | å·²æ•´åˆåˆ°ç»Ÿä¸€æ–‡ä»¶ |
| `test_specific_operations_pytest.py` | å·²æ•´åˆåˆ°ç»Ÿä¸€æ–‡ä»¶ |
| `test_dwsim_operations.py` | é‡å¤åŠŸèƒ½ |
| `test_comprehensive_unit_operations.py` | é‡å¤åŠŸèƒ½ |
| `test_dwsim_unit_operations_comprehensive.py` | é‡å¤åŠŸèƒ½ |
| `test_specific_unit_operations.py` | é‡å¤åŠŸèƒ½ |
| `TEST_COVERAGE_SUMMARY.md` | å·²è¿‡æ—¶ |
| `test_thermo/` | ç©ºç›®å½• |
| `test_core/` | ç©ºç›®å½• |
| `test_api/` | ç©ºç›®å½• |
| `test_operations/` | ç©ºç›®å½• |
| `benchmarks/` | ç©ºç›®å½• |

## ğŸ‰ æ•´ç†æˆæœ

### 1. ç®€åŒ–ç»“æ„
- **ä»åˆ†æ•£çš„20+æ–‡ä»¶** â†’ **ç»Ÿä¸€çš„æ ¸å¿ƒç³»ç»Ÿ**
- **æ¸…æ™°çš„åŠŸèƒ½åˆ†åŒº** â†’ `unified/`, `legacy/`, `data/`, `reports/`, `docs/`
- **ä¸€ä¸ªä¸»è¦å…¥å£** â†’ `run_unified_pytest.py`

### 2. åŠŸèƒ½æ•´åˆ
- **36ä¸ªæµ‹è¯•ç”¨ä¾‹**æ•´åˆåˆ°ä¸€ä¸ªæ–‡ä»¶
- **11ä¸ªæµ‹è¯•ç±»**æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡
- **20ä¸ªpytestæ ‡è®°**æä¾›çµæ´»è¿‡æ»¤
- **533è¡ŒåŠŸèƒ½ä¸°å¯Œçš„è¿è¡Œå™¨**

### 3. å‘åå…¼å®¹
- **å®Œæ•´ä¿ç•™å†å²ç‰ˆæœ¬**åœ¨`legacy/`ç›®å½•
- **å¯éšæ—¶å›é€€**åˆ°æ—§ç³»ç»Ÿ
- **æ¸è¿›å¼è¿ç§»**æ”¯æŒ

### 4. æ–‡æ¡£å®Œå–„
- **å®Œæ•´çš„ä½¿ç”¨æŒ‡å—** (`README.md`, `docs/USAGE.md`)
- **è¯¦ç»†çš„å¼€å‘æŒ‡å—** (`docs/DEVELOPMENT.md`)
- **å†å²ç‰ˆæœ¬è¯´æ˜** (`legacy/README.md`)

## ğŸš€ ä½¿ç”¨ä½“éªŒæ”¹è¿›

### ä¹‹å‰ï¼ˆå¤æ‚åˆ†æ•£ï¼‰
```bash
# éœ€è¦è®°ä½å¤šä¸ªå‘½ä»¤å’Œæ–‡ä»¶
./run_pytest_dwsim.py
python run_all_dwsim_tests.py  
pytest test_dwsim_operations_pytest.py
python test_specific_operations_pytest.py
```

### ç°åœ¨ï¼ˆç»Ÿä¸€ç®€æ´ï¼‰
```bash
# ä¸€ä¸ªç»Ÿä¸€çš„è¿è¡Œå™¨
python run_unified_pytest.py                # æ‰€æœ‰æµ‹è¯•
python run_unified_pytest.py --smoke        # å†’çƒŸæµ‹è¯•
python run_unified_pytest.py --component mixer  # ç»„ä»¶æµ‹è¯•
python run_unified_pytest.py --help         # æŸ¥çœ‹æ‰€æœ‰é€‰é¡¹
```

## ğŸ“Š æµ‹è¯•è¦†ç›–

### ç»Ÿä¸€æµ‹è¯•ç³»ç»Ÿè¦†ç›–èŒƒå›´
- âœ… **åŸºç¡€æ¡†æ¶æµ‹è¯•** (3ä¸ª) - SimulationObjectClassã€UnitOpBaseClassç­‰
- âœ… **åŸºæœ¬å•å…ƒæ“ä½œ** (7ä¸ª) - æ··åˆå™¨ã€åŠ çƒ­å™¨ã€æ³µã€çƒ­äº¤æ¢å™¨ç­‰
- âœ… **ååº”å™¨ç³»ç»Ÿ** (2ä¸ª) - ååº”å™¨æ“ä½œæ¨¡å¼ã€è½¬åŒ–ç‡ç®¡ç†
- âœ… **é€»è¾‘æ¨¡å—** (2ä¸ª) - Adjustã€Recycleæ”¶æ•›è®¡ç®—
- âœ… **é«˜çº§åŠŸèƒ½** (1ä¸ª) - ç²¾é¦å¡”ä¸¥æ ¼è®¡ç®—
- âœ… **CAPE-OPENé›†æˆ** (1ä¸ª) - ç¬¬ä¸‰æ–¹ç»„ä»¶äº’æ“ä½œ
- âœ… **æ±‚è§£å™¨é›†æˆ** (3ä¸ª) - é›†æˆæ±‚è§£å™¨åŠŸèƒ½éªŒè¯
- âœ… **æ€§èƒ½æµ‹è¯•** (2ä¸ª) - å¤§å‹æµç¨‹å›¾ã€æ“ä½œæ³¨å†Œè¡¨æ€§èƒ½
- âœ… **éªŒè¯è°ƒè¯•** (3ä¸ª) - è¾“å…¥éªŒè¯ã€é”™è¯¯å¤„ç†ã€è°ƒè¯•åŠŸèƒ½
- âœ… **å†’çƒŸæµ‹è¯•** (3ä¸ª) - å¿«é€ŸåŸºæœ¬åŠŸèƒ½éªŒè¯
- âœ… **é›†æˆæµ‹è¯•** (1ä¸ª) - å®Œæ•´æµç¨‹å›¾éªŒè¯
- âœ… **å‚æ•°åŒ–æµ‹è¯•** (8ä¸ª) - å¤šå‚æ•°æµ‹è¯•è¦†ç›–

### æ ‡è®°ç³»ç»Ÿ
- **æ¶æ„å±‚çº§**: foundation, basic_ops, advanced, integration
- **ç³»ç»Ÿæ¨¡å—**: reactors, logical, solver, cape_open, validation  
- **å…·ä½“è®¾å¤‡**: mixer, splitter, heater, cooler, pump, compressor, valve, heat_exchanger
- **æµ‹è¯•ç±»å‹**: unit, performance, smoke, slow, fast
- **ç‰¹æ®ŠåŠŸèƒ½**: parametrize, error_handling, memory, concurrent

## ğŸ”§ æŠ€æœ¯æ”¹è¿›

### 1. é”™è¯¯å¤„ç†
- **æ™ºèƒ½æ¨¡å—è·³è¿‡**: è‡ªåŠ¨æ£€æµ‹DWSIMæ¨¡å—å¯ç”¨æ€§
- **ä¼˜é›…é”™è¯¯æ¢å¤**: æµ‹è¯•å¤±è´¥ä¸å½±å“å…¶ä»–æµ‹è¯•
- **è¯¦ç»†é”™è¯¯ä¿¡æ¯**: æ˜ç¡®çš„å¤±è´¥åŸå› å’Œè§£å†³å»ºè®®

### 2. æ€§èƒ½ä¼˜åŒ–
- **å¹¶è¡Œæµ‹è¯•æ‰§è¡Œ**: æ”¯æŒå¤šæ ¸å¹¶è¡Œè¿è¡Œ
- **æ™ºèƒ½æµ‹è¯•é€‰æ‹©**: çµæ´»çš„æ ‡è®°è¿‡æ»¤ç³»ç»Ÿ
- **å¿«é€ŸéªŒè¯**: å†’çƒŸæµ‹è¯•2ç§’å†…å®Œæˆ

### 3. æŠ¥å‘Šå¢å¼º
- **è¦†ç›–ç‡åˆ†æ**: é›†æˆpytest-cov
- **HTMLæŠ¥å‘Š**: å¯è§†åŒ–æµ‹è¯•ç»“æœ
- **æ€§èƒ½åŸºå‡†**: æ‰§è¡Œæ—¶é—´ç»Ÿè®¡

## ğŸ“ˆ éªŒè¯ç»“æœ

### åŠŸèƒ½éªŒè¯ âœ…
```bash
# æµ‹è¯•æ”¶é›†
$ python run_unified_pytest.py --collect
ğŸ“Š å‘ç° 36 ä¸ªæµ‹è¯•ç”¨ä¾‹

# å†’çƒŸæµ‹è¯•
$ python run_unified_pytest.py --smoke  
âœ… 3 passed in 2.01s

# ç»„ä»¶æµ‹è¯•
$ python run_unified_pytest.py --component foundation
âœ… 3 passed in 1.85s
```

### æ€§èƒ½åŸºå‡† âœ…
| æµ‹è¯•ç±»å‹ | æµ‹è¯•æ•°é‡ | æ‰§è¡Œæ—¶é—´ | çŠ¶æ€ |
|---------|---------|---------|------|
| å†’çƒŸæµ‹è¯• | 3ä¸ª | ~2ç§’ | âœ… |
| å¿«é€Ÿæµ‹è¯• | 35ä¸ª | ~2.5ç§’ | âœ… |
| å®Œæ•´æµ‹è¯• | 36ä¸ª | ~15ç§’ | âœ… |
| æ€§èƒ½æµ‹è¯• | 2ä¸ª | ~10ç§’ | âœ… |

## ğŸ¯ åç»­ç»´æŠ¤

### å»ºè®®ä½¿ç”¨æµç¨‹
1. **æ—¥å¸¸å¼€å‘**: ä½¿ç”¨ `--smoke` å¿«é€ŸéªŒè¯
2. **åŠŸèƒ½æµ‹è¯•**: ä½¿ç”¨ `--component` é’ˆå¯¹æ€§æµ‹è¯•
3. **é›†æˆéªŒè¯**: ä½¿ç”¨ `--quick` å®Œæ•´ä½†å¿«é€Ÿçš„æµ‹è¯•
4. **å‘å¸ƒå‰**: è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶

### ç»´æŠ¤è¦ç‚¹
- **ä¼˜å…ˆä½¿ç”¨ç»Ÿä¸€ç³»ç»Ÿ**: `unified/` ç›®å½•ä¸­çš„æ–‡ä»¶
- **legacy/ åªè¯»ä¿å­˜**: ä¸å†æ›´æ–°ï¼Œä»…ä¾›å‚è€ƒ
- **æŒç»­æ”¹è¿›**: åŸºäºä½¿ç”¨åé¦ˆä¼˜åŒ–è¿è¡Œå™¨åŠŸèƒ½

## ğŸ‰ æ€»ç»“

è¿™æ¬¡é‡æ–°æ•´ç†æˆåŠŸåœ°å°†ä¸€ä¸ªå¤æ‚ã€åˆ†æ•£çš„æµ‹è¯•ç³»ç»Ÿè½¬æ¢ä¸ºï¼š

âœ… **ç»“æ„æ¸…æ™°** - åŠŸèƒ½æ˜ç¡®çš„ç›®å½•åˆ†åŒº  
âœ… **ä½¿ç”¨ç®€å•** - ç»Ÿä¸€çš„å‘½ä»¤è¡Œæ¥å£  
âœ… **åŠŸèƒ½å®Œæ•´** - è¦†ç›–æ‰€æœ‰åŸæœ‰æµ‹è¯•åŠŸèƒ½  
âœ… **æ€§èƒ½ä¼˜ç§€** - å¿«é€Ÿæ‰§è¡Œå’Œå¹¶è¡Œæ”¯æŒ  
âœ… **æ–‡æ¡£ä¸°å¯Œ** - å®Œæ•´çš„ä½¿ç”¨å’Œå¼€å‘æŒ‡å—  
âœ… **å‘åå…¼å®¹** - ä¿ç•™å†å²ç‰ˆæœ¬ä¾›å‚è€ƒ  

ç°åœ¨å¼€å‘è€…å¯ä»¥äº«å—ä¸€ä¸ªé«˜æ•ˆã€ç°ä»£çš„DWSIMå•å…ƒæ“ä½œæµ‹è¯•ä½“éªŒï¼ ğŸš€

---

**æ•´ç†å®Œæˆæ—¶é—´**: 2024å¹´12æœˆ  
**ä¸»è¦è´¡çŒ®**: ç»Ÿä¸€æµ‹è¯•æ¡†æ¶è®¾è®¡ä¸å®ç°  
**æ¨èä½¿ç”¨**: `python run_unified_pytest.py --help` å¼€å§‹æ¢ç´¢ï¼ 